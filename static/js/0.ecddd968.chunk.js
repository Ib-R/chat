webpackJsonp([0],{51:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),i=n.n(s),l=n(12),c=n(52),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),m(t,[{key:"componentDidMount",value:function(){var e=this.props.room;c.d.connect(),c.d.emit("joinRoom",{username:Object(l.a)("username"),room:e})}},{key:"componentDidUpdate",value:function(e){var t=this.props.room;e.room!==t&&(c.d.disconnect(),c.d.connect(),c.d.emit("joinRoom",{username:Object(l.a)("username"),room:t}))}},{key:"componentWillUnmount",value:function(){c.d.disconnect()}},{key:"render",value:function(){var e=this.props,t=e.logout,n=e.room;return i.a.createElement("div",null,i.a.createElement("div",{id:"chat-h",className:"fixed-top"},i.a.createElement("span",{onClick:t,className:"btn btn-danger float-right"},"Logout"),i.a.createElement("div",{id:"roomHead"},i.a.createElement("p",{id:"roomName"},n),i.a.createElement("small",{id:"membersCount","data-toggle":"modal","data-target":"#membersModal"}),i.a.createElement("small",{id:"typing"}))),i.a.createElement("div",{className:"modal fade",id:"membersModal",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},i.a.createElement("div",{className:"modal-dialog",role:"document"},i.a.createElement("div",{className:"modal-content"},i.a.createElement("div",{className:"modal-header"},i.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},"Room Members"),i.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},i.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),i.a.createElement("div",{className:"modal-body"},i.a.createElement("ul",{id:"members"})),i.a.createElement("div",{className:"modal-footer"},i.a.createElement("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal"},"Close"))))),i.a.createElement("div",{id:"messageArea",className:"container row"},i.a.createElement("ul",{className:"chat",id:"chat"}),i.a.createElement("div",{className:"fixed-bottom row justify-content-md-center"},i.a.createElement("form",{onSubmit:c.c,id:"messageForm",className:"col col-md-8 row",autoComplete:"off"},i.a.createElement("label",{className:"sr-only"},"Enter Message"),i.a.createElement("input",{onInput:c.a,name:"message",type:"text",className:"form-control",id:"message",placeholder:"Enter Message"}),i.a.createElement("input",{type:"submit",className:"btn btn-primary",id:"msg-submit",value:"Send"}),i.a.createElement("label",{id:"imgBtn",className:"btn btn-primary",htmlFor:"imgUploadInput"},"\u26f6"),i.a.createElement("input",{onChange:c.b,type:"file",style:{display:"none"},name:"img",id:"imgUploadInput"})))),i.a.createElement("iframe",{title:"background",style:{position:"absolute",width:"100%",height:"100%",top:"0",border:"none"},src:"bg/index.html"}))}}]),t}(s.Component);t.default=u},52:function(e,t,n){"use strict";function a(e){var t=document.getElementById("roomName"),n=document.getElementById("membersCount"),a=document.getElementById("members");t.innerHTML="",a.innerHTML="",t.insertAdjacentHTML("beforeend",o(e.room)),n.innerHTML=e.users.length+" members",e.users.forEach(function(e,t){a.insertAdjacentHTML("beforeend","<li>"+e.username+"</li>")})}function o(e){return e.charAt(0).toUpperCase()+e.slice(1)}function r(e,t,n){document.hasFocus()||window.Push.create(n,{body:e,icon:"https://image.flaticon.com/teams/slug/freepik.jpg",timeout:4e3,onClick:function(){window.focus(),this.close()}})}function s(){var e=document.querySelector("#chat");e.scrollTop=e.scrollHeight}function i(e){var t=document.querySelector("#message"),n={};e.preventDefault(),n={msg:t.value,user:Object(c.a)("username")},m.emit("send message",n),t.value=""}n.d(t,"d",function(){return m}),n.d(t,"a",function(){return u}),n.d(t,"b",function(){return d}),t.c=i;var l,c=n(12),m=window.io.connect("//"+Object(c.a)("server")),u=function(){m.emit("typing",Object(c.a)("username"))};m.on("typing",function(e){var t=document.querySelector("#typing"),n=document.getElementById("membersCount");n.classList.add("d-none"),t.innerHTML=e+" is typing...",clearTimeout(l),l=setTimeout(function(){t.innerHTML="",n.classList.remove("d-none")},700)}),m.on("roomUsers",function(e){a(e)});var d=function(e){var t=document.querySelector("#imgUploadInput"),n=new FormData;null!=t.files[0]&&(n.append("img",t.files[0]),n.append("username",Object(c.a)("username")),fetch("//"+Object(c.a)("server")+"/upload",{body:n,method:"POST"}).then(function(e){return e.json()}).then(function(e){}).catch(function(){alert("error")})),console.log(t.files[0])};m.on("new message",function(e){var t=document.querySelector("#chat");e.user===Object(c.a)("username")?t.insertAdjacentHTML("beforeend",'<div class="float-right own-msg bg-secondary">\n                <strong class="username">'+e.user+'</strong>\n                <p class="text-light">'+e.msg+" <small>"+e.time+'</small></p>\n            </div>\n            <div class="clearfix"></div>'):(t.insertAdjacentHTML("beforeend",'<div class="bg-primary float-left msg"><p class="text-light"><strong>'+e.user+"</strong>: "+e.msg+'</p></div><div class="clearfix"></div>'),r("You Got new Message","https://image.flaticon.com/teams/slug/freepik.jpg","New Message")),s()}),m.on("show image",function(e){var t=document.querySelector("#chat");e.user===Object(c.a)("username")?t.insertAdjacentHTML("beforeend",'<div class="float-right own-msg bg-secondary">\n                <a data-fancybox="ownGallery" href="//'+Object(c.a)("server")+"/uploads/"+e.msg+'">\n                    <figure class="figure">\n                        <img id="img" src="//'+Object(c.a)("server")+"/uploads/"+e.msg+'">\n                        <figcaption class="figure-caption d-flex justify-content-between">\n                            <strong>'+e.user+"</strong> \n                            <small>"+e.time+'</small>\n                        </figcaption>\n                    </figure>\n                </a>\n            </div>\n            <div class="clearfix"></div>'):t.insertAdjacentHTML("beforeend",'<div class="bg-primary float-left msg">\n                <a data-fancybox="gallery" href="//'+Object(c.a)("server")+"/uploads/"+e.msg+'">\n                    <figure class="figure">\n                        <img id="img" src="//'+Object(c.a)("server")+"/uploads/"+e.msg+'">\n                        <figcaption class="figure-caption d-flex justify-content-between">\n                            <strong>'+e.user+"</strong>\n                            <small>"+e.time+'</small>\n                        </figcaption>\n                    </figure>\n                </a>\n            </div>\n            <div class="clearfix"></div>'),s()})}});
//# sourceMappingURL=0.ecddd968.chunk.js.map